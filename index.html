<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Gets data from police records for road safety analysis.">
<title>Get Open Data from Operation Snap Police Records • opsnap</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Get Open Data from Operation Snap Police Records">
<meta property="og:description" content="Gets data from police records for road safety analysis.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">opsnap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h1></div>
<p>Install the package from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ITSLeeds/opsnap"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="opsnap-data">Opsnap data<a class="anchor" aria-label="anchor" href="#opsnap-data"></a>
</h1>
<p>The <code>opsnap</code> package provides a function to download and read in data from the West Yorkshire Police Operation Snap database. The data is available at the following URL: <a href="https://www.westyorkshire.police.uk/SaferRoadsSubmissions" class="external-link uri">https://www.westyorkshire.police.uk/SaferRoadsSubmissions</a></p>
<p>Data for the following years are provided:</p>
<table class="table">
<thead><tr class="header">
<th align="left">file_names</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">operation_snap_oct-dec_2023_0.xlsx</td>
</tr>
<tr class="even">
<td align="left">operation_snap_july-sept_2023.xlsx</td>
</tr>
<tr class="odd">
<td align="left">operation_snap_apr-jun_2023_data.xlsx</td>
</tr>
<tr class="even">
<td align="left">operation_snap_jan-mar_2023_data.xlsx</td>
</tr>
<tr class="odd">
<td align="left">operation_snap_oct-dec_2022_data.xlsx</td>
</tr>
<tr class="even">
<td align="left">operation_snap_jul-sept_2022_data.xlsx</td>
</tr>
<tr class="odd">
<td align="left">operation_snap_apr-jun_2022_data.xlsx</td>
</tr>
<tr class="even">
<td align="left">operation_snap_jan-mar_2022_data.xlsx</td>
</tr>
<tr class="odd">
<td align="left">operation_snap_2021_data.xlsx</td>
</tr>
</tbody>
</table>
<p>The data is open acess and looks like this, with names cleaned up by the package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">u</span> <span class="op">=</span> <span class="st">"https://www.westyorkshire.police.uk/sites/default/files/2024-01/operation_snap_oct-dec_2023_0.xlsx"</span></span>
<span><span class="va">d</span> <span class="op">=</span> <span class="fu">opsnap</span><span class="fu">:::</span><span class="fu">download_and_read</span><span class="op">(</span><span class="va">u</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span><span class="co"># Old names:</span></span>
<span><span class="co">#  [1] "REPORTER TRANSPORT MODE" "OFFENDER VEHICLE MAKE"  </span></span>
<span><span class="co">#  [3] "OFFENDER VEHICLE MODEL"  "OFFENDER VEHICLE COLOUR"</span></span>
<span><span class="co">#  [5] "OFFENCE"                 "DISTRICT"               </span></span>
<span><span class="co">#  [7] "DISPOSAL"                "DATE OF SUBMISSION"     </span></span>
<span><span class="co">#  [9] "...9"                    "OFF LOCATION"</span></span>
<span><span class="co"># New names:</span></span>
<span><span class="co"># [1] "mode"     "make"     "model"    "colour"   "offence"  "district" "disposal"</span></span>
<span><span class="co"># [8] "date"     "location"</span></span></code></pre></div>
<!-- The data looks like this (first 3 rows shown): -->
<table class="table">
<colgroup>
<col width="9%">
<col width="5%">
<col width="4%">
<col width="4%">
<col width="33%">
<col width="5%">
<col width="11%">
<col width="6%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="left">mode</th>
<th align="left">make</th>
<th align="left">model</th>
<th align="left">colour</th>
<th align="left">offence</th>
<th align="left">district</th>
<th align="left">disposal</th>
<th align="left">date</th>
<th align="left">location</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Cyclist</td>
<td align="left">Honda</td>
<td align="left">JAZZ</td>
<td align="left">BLUE</td>
<td align="left">RT88576 Drive without reasonable consideration to others</td>
<td align="left">BD</td>
<td align="left">Educational Course</td>
<td align="left">2023-10-01</td>
<td align="left">A650 SIR FRED HOYLE WAY, BINGLEY</td>
</tr>
<tr class="even">
<td align="left">Cyclist</td>
<td align="left">Citroen</td>
<td align="left">DS3</td>
<td align="left">WHITE</td>
<td align="left">RT88576 Drive without reasonable consideration to others</td>
<td align="left">BD</td>
<td align="left">Educational Course</td>
<td align="left">2023-10-01</td>
<td align="left">DALTON BANK ROAD, HUDDERSFIELD</td>
</tr>
<tr class="odd">
<td align="left">Vehicle driver</td>
<td align="left">Audi</td>
<td align="left">S3</td>
<td align="left">BLACK</td>
<td align="left">RT88760 Fail to comply with solid white lines</td>
<td align="left">LD</td>
<td align="left">Educational Course</td>
<td align="left">2023-10-01</td>
<td align="left">A1 North Wetherby, Leeds</td>
</tr>
</tbody>
</table>
<p>There are 18363 records in the data, with increasing numbers of records over time (average n. records per month shown below):</p>
<p><img src="reference/figures/README-unnamed-chunk-8-1.png" style="width:100.0%"></p>
<p>As shown in the graph above, some records (68.9%) have missing values for the ‘offence’ column (these records did not classify as an offence). Many records lack either an offence or a location (48.1%). Filtering these out leaves 8832 complete records.</p>
<p>There are 6478 unique locations in the data, with the most common locations shown below:</p>
<table class="table">
<colgroup>
<col width="68%">
<col width="7%">
<col width="24%">
</colgroup>
<thead><tr class="header">
<th align="left">location</th>
<th align="right">n</th>
<th align="left">percent_records</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Meanwood Road, Leeds</td>
<td align="right">34</td>
<td align="left">0.385%</td>
</tr>
<tr class="even">
<td align="left">Westgate J/W Park Square West, Leeds</td>
<td align="right">31</td>
<td align="left">0.351%</td>
</tr>
<tr class="odd">
<td align="left">Dewsbury Road, Ossett</td>
<td align="right">29</td>
<td align="left">0.328%</td>
</tr>
<tr class="even">
<td align="left">Chapeltown Road, Leeds</td>
<td align="right">24</td>
<td align="left">0.272%</td>
</tr>
<tr class="odd">
<td align="left">Highgate Road, Bradford</td>
<td align="right">22</td>
<td align="left">0.249%</td>
</tr>
<tr class="even">
<td align="left">M62 EASTBOUND, BRIGHOUSE</td>
<td align="right">19</td>
<td align="left">0.215%</td>
</tr>
<tr class="odd">
<td align="left">Clayton Road, Bradford</td>
<td align="right">18</td>
<td align="left">0.204%</td>
</tr>
<tr class="even">
<td align="left">Tongue Lane, Leeds</td>
<td align="right">18</td>
<td align="left">0.204%</td>
</tr>
<tr class="odd">
<td align="left">WESTGATE junction with PARK SQUARE WEST, LEEDS</td>
<td align="right">18</td>
<td align="left">0.204%</td>
</tr>
<tr class="even">
<td align="left">Manchester Road, Bradford</td>
<td align="right">17</td>
<td align="left">0.192%</td>
</tr>
</tbody>
</table>
</div>
<div class="section level1">
<h1 id="geocoding">Geocoding<a class="anchor" aria-label="anchor" href="#geocoding"></a>
</h1>
<p>We provide a function to geocode the records:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d_sample</span> <span class="op">=</span> <span class="va">d</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span></span>
<span><span class="va">d_sf</span> <span class="op">=</span> <span class="fu">opsnap</span><span class="fu">:::</span><span class="fu">op_geocode</span><span class="op">(</span><span class="va">d_sample</span><span class="op">)</span></span>
<span><span class="fu">mapview</span><span class="fu">::</span><span class="fu">mapview</span><span class="op">(</span><span class="va">d_sf</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="analysis">Analysis<a class="anchor" aria-label="anchor" href="#analysis"></a>
</h1>
<p>Due to inaccuracy in the geocoding, we only know the locations of the records to within around 500m of each crash (although we can link to specific roads). We’ll present the geographic distribution of crashes using a 500m grid:</p>
<p><img src="reference/figures/README-unnamed-chunk-12-1.png" style="width:100.0%"></p>
<p>The results show there is one outlier with a very high number of crashes. We can remove this and plot the data again:</p>
<p><img src="reference/figures/README-unnamed-chunk-13-1.png" style="width:100.0%"></p>
<!-- You can query the data downloaded with `opsnap` functions, e.g. as follows (results not shown): -->
<!-- Let's make a plot of the data: -->
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing opsnap</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Robin Lovelace <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-5679-6536" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ITSLeeds/opsnap/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/ITSLeeds/opsnap/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Robin Lovelace.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
