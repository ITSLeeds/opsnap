<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Gets data from police records for road safety analysis.">
<title>Operation Snap Police Records • opsnap</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Operation Snap Police Records">
<meta property="og:description" content="Gets data from police records for road safety analysis.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">opsnap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h1></div>
<p>Install the package from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ITSLeeds/opsnap"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="opsnap-data">Opsnap data<a class="anchor" aria-label="anchor" href="#opsnap-data"></a>
</h1>
<p>The <code>opsnap</code> package provides a function to download and read in data from the West Yorkshire Police Operation Snap database. The data is available at the following URL: <a href="https://www.westyorkshire.police.uk/SaferRoadsSubmissions" class="external-link uri">https://www.westyorkshire.police.uk/SaferRoadsSubmissions</a></p>
<p>Data for the following years are provided:</p>
<table class="table">
<thead><tr class="header">
<th align="left">file_names</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">operation_snap_oct-dec_2023_0.xlsx</td>
</tr>
<tr class="even">
<td align="left">operation_snap_july-sept_2023.xlsx</td>
</tr>
<tr class="odd">
<td align="left">operation_snap_apr-jun_2023_data.xlsx</td>
</tr>
<tr class="even">
<td align="left">operation_snap_jan-mar_2023_data.xlsx</td>
</tr>
<tr class="odd">
<td align="left">operation_snap_oct-dec_2022_data.xlsx</td>
</tr>
<tr class="even">
<td align="left">operation_snap_jul-sept_2022_data.xlsx</td>
</tr>
<tr class="odd">
<td align="left">operation_snap_apr-jun_2022_data.xlsx</td>
</tr>
<tr class="even">
<td align="left">operation_snap_jan-mar_2022_data.xlsx</td>
</tr>
<tr class="odd">
<td align="left">operation_snap_2021_data.xlsx</td>
</tr>
</tbody>
</table>
<p>The data is open acess and looks like this, with names cleaned up by the package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">u</span> <span class="op">=</span> <span class="st">"https://www.westyorkshire.police.uk/sites/default/files/2024-01/operation_snap_oct-dec_2023_0.xlsx"</span></span>
<span><span class="va">d</span> <span class="op">=</span> <span class="fu">opsnap</span><span class="fu">:::</span><span class="fu">download_and_read</span><span class="op">(</span><span class="va">u</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span><span class="co"># Old names:</span></span>
<span><span class="co">#  [1] "REPORTER TRANSPORT MODE" "OFFENDER VEHICLE MAKE"  </span></span>
<span><span class="co">#  [3] "OFFENDER VEHICLE MODEL"  "OFFENDER VEHICLE COLOUR"</span></span>
<span><span class="co">#  [5] "OFFENCE"                 "DISTRICT"               </span></span>
<span><span class="co">#  [7] "DISPOSAL"                "DATE OF SUBMISSION"     </span></span>
<span><span class="co">#  [9] "...9"                    "OFF LOCATION"</span></span>
<span><span class="co"># New names:</span></span>
<span><span class="co"># [1] "mode"     "make"     "model"    "colour"   "offence"  "district" "disposal"</span></span>
<span><span class="co"># [8] "date"     "location"</span></span></code></pre></div>
<!-- The data looks like this (first 3 rows shown): -->
<table class="table">
<colgroup>
<col width="9%">
<col width="5%">
<col width="4%">
<col width="4%">
<col width="33%">
<col width="5%">
<col width="11%">
<col width="6%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="left">mode</th>
<th align="left">make</th>
<th align="left">model</th>
<th align="left">colour</th>
<th align="left">offence</th>
<th align="left">district</th>
<th align="left">disposal</th>
<th align="left">date</th>
<th align="left">location</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">cyclist</td>
<td align="left">Honda</td>
<td align="left">JAZZ</td>
<td align="left">BLUE</td>
<td align="left">rt88576 drive without reasonable consideration to others</td>
<td align="left">BD</td>
<td align="left">educational course</td>
<td align="left">2023-10-01</td>
<td align="left">A650 SIR FRED HOYLE WAY, BINGLEY</td>
</tr>
<tr class="even">
<td align="left">cyclist</td>
<td align="left">Citroen</td>
<td align="left">DS3</td>
<td align="left">WHITE</td>
<td align="left">rt88576 drive without reasonable consideration to others</td>
<td align="left">BD</td>
<td align="left">educational course</td>
<td align="left">2023-10-01</td>
<td align="left">DALTON BANK ROAD, HUDDERSFIELD</td>
</tr>
<tr class="odd">
<td align="left">vehicle driver</td>
<td align="left">Audi</td>
<td align="left">S3</td>
<td align="left">BLACK</td>
<td align="left">rt88760 fail to comply with solid white lines</td>
<td align="left">LD</td>
<td align="left">educational course</td>
<td align="left">2023-10-01</td>
<td align="left">A1 North Wetherby, Leeds</td>
</tr>
</tbody>
</table>
</div>
<div class="section level1">
<h1 id="preliminary-analysis">Preliminary analysis<a class="anchor" aria-label="anchor" href="#preliminary-analysis"></a>
</h1>
<p>There are 18363 records in the data, with increasing numbers of records over time (average n. records per month shown below):</p>
<p><img src="reference/figures/README-unnamed-chunk-8-1.png" style="width:100.0%"></p>
<p>As shown in the graph above, 100% have values for the ‘offence’ column. Many records lack either an offence or a location, leaving only 69.6% or 12782 complete records.</p>
<p>The breakdown of records by mode of transport (of the observer) is shown below:</p>
<table class="table">
<thead><tr class="header">
<th align="left">mode</th>
<th align="right">n</th>
<th align="left">percent_records</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">vehicle driver</td>
<td align="right">9167</td>
<td align="left">49.92%</td>
</tr>
<tr class="even">
<td align="left">cyclist</td>
<td align="right">6312</td>
<td align="left">34.37%</td>
</tr>
<tr class="odd">
<td align="left">pedestrian</td>
<td align="right">1352</td>
<td align="left">7.36%</td>
</tr>
<tr class="even">
<td align="left">vehicle passenger</td>
<td align="right">579</td>
<td align="left">3.15%</td>
</tr>
<tr class="odd">
<td align="left">unknown</td>
<td align="right">497</td>
<td align="left">2.71%</td>
</tr>
<tr class="even">
<td align="left">horse rider</td>
<td align="right">407</td>
<td align="left">2.22%</td>
</tr>
<tr class="odd">
<td align="left">motorcyclist</td>
<td align="right">48</td>
<td align="left">0.26%</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="right">1</td>
<td align="left">0.01%</td>
</tr>
</tbody>
</table>
<p>The offence text strings are quite long, with the most common offences shown below:</p>
<table class="table">
<colgroup>
<col width="81%">
<col width="4%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="left">offence</th>
<th align="right">n</th>
<th align="left">percent_records</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">n/a</td>
<td align="right">5706</td>
<td align="left">31.0734%</td>
</tr>
<tr class="even">
<td align="left">rt88576 drive without reasonable consideration to others</td>
<td align="right">4992</td>
<td align="left">27.1851%</td>
</tr>
<tr class="odd">
<td align="left">rt88575 drive without due care and attention</td>
<td align="right">2917</td>
<td align="left">15.8852%</td>
</tr>
<tr class="even">
<td align="left">rt88975 drive motor vehicle fail to comply with red / green arrow / lane closure traffic light signals</td>
<td align="right">1364</td>
<td align="left">7.4280%</td>
</tr>
<tr class="odd">
<td align="left">rt88971 fail to comply with red traffic light</td>
<td align="right">679</td>
<td align="left">3.6977%</td>
</tr>
<tr class="even">
<td align="left">rt88966 motor vehicle fail to comply with endorsable s36 traffic sign</td>
<td align="right">411</td>
<td align="left">2.2382%</td>
</tr>
<tr class="odd">
<td align="left">rv86019 use a handheld phone / device whilst driving a motor vehicle on a road</td>
<td align="right">357</td>
<td align="left">1.9441%</td>
</tr>
<tr class="even">
<td align="left">rt88760 fail to comply with solid white lines</td>
<td align="right">265</td>
<td align="left">1.4431%</td>
</tr>
<tr class="odd">
<td align="left">rt88751 contravene give way sign</td>
<td align="right">264</td>
<td align="left">1.4377%</td>
</tr>
<tr class="even">
<td align="left">suspected contravene weight restriction.</td>
<td align="right">213</td>
<td align="left">1.1599%</td>
</tr>
</tbody>
</table>
<p>The equivalent table excluding records with missing offence data is shown below:</p>
<table class="table">
<colgroup>
<col width="81%">
<col width="4%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="left">offence</th>
<th align="right">n</th>
<th align="left">percent_records</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">n/a</td>
<td align="right">5706</td>
<td align="left">31.0750%</td>
</tr>
<tr class="even">
<td align="left">rt88576 drive without reasonable consideration to others</td>
<td align="right">4992</td>
<td align="left">27.1866%</td>
</tr>
<tr class="odd">
<td align="left">rt88575 drive without due care and attention</td>
<td align="right">2917</td>
<td align="left">15.8861%</td>
</tr>
<tr class="even">
<td align="left">rt88975 drive motor vehicle fail to comply with red / green arrow / lane closure traffic light signals</td>
<td align="right">1364</td>
<td align="left">7.4284%</td>
</tr>
<tr class="odd">
<td align="left">rt88971 fail to comply with red traffic light</td>
<td align="right">679</td>
<td align="left">3.6979%</td>
</tr>
<tr class="even">
<td align="left">rt88966 motor vehicle fail to comply with endorsable s36 traffic sign</td>
<td align="right">411</td>
<td align="left">2.2383%</td>
</tr>
<tr class="odd">
<td align="left">rv86019 use a handheld phone / device whilst driving a motor vehicle on a road</td>
<td align="right">357</td>
<td align="left">1.9442%</td>
</tr>
<tr class="even">
<td align="left">rt88760 fail to comply with solid white lines</td>
<td align="right">265</td>
<td align="left">1.4432%</td>
</tr>
<tr class="odd">
<td align="left">rt88751 contravene give way sign</td>
<td align="right">264</td>
<td align="left">1.4378%</td>
</tr>
<tr class="even">
<td align="left">suspected contravene weight restriction.</td>
<td align="right">213</td>
<td align="left">1.1600%</td>
</tr>
</tbody>
</table>
<p>In terms ‘disposal’, the most common values are shown below:</p>
<table class="table">
<thead><tr class="header">
<th align="left">disposal</th>
<th align="right">n</th>
<th align="left">percent_records</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">educational course</td>
<td align="right">9806</td>
<td align="left">53.40%</td>
</tr>
<tr class="even">
<td align="left">nfa</td>
<td align="right">5697</td>
<td align="left">31.02%</td>
</tr>
<tr class="odd">
<td align="left">conditional offer</td>
<td align="right">2326</td>
<td align="left">12.67%</td>
</tr>
<tr class="even">
<td align="left">court</td>
<td align="right">307</td>
<td align="left">1.67%</td>
</tr>
<tr class="odd">
<td align="left">dsit investigation</td>
<td align="right">202</td>
<td align="left">1.10%</td>
</tr>
<tr class="even">
<td align="left">rpu investigation</td>
<td align="right">23</td>
<td align="left">0.13%</td>
</tr>
<tr class="odd">
<td align="left">fine</td>
<td align="right">1</td>
<td align="left">0.01%</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="right">1</td>
<td align="left">0.01%</td>
</tr>
</tbody>
</table>
<p>There are 8800 unique location text strings (addresses) in the data, with the most common locations shown below:</p>
<table class="table">
<colgroup>
<col width="68%">
<col width="7%">
<col width="24%">
</colgroup>
<thead><tr class="header">
<th align="left">location</th>
<th align="right">n</th>
<th align="left">percent_records</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Meanwood Road, Leeds</td>
<td align="right">49</td>
<td align="left">0.3834%</td>
</tr>
<tr class="even">
<td align="left">Dewsbury Road, Ossett</td>
<td align="right">48</td>
<td align="left">0.3755%</td>
</tr>
<tr class="odd">
<td align="left">Westgate J/W Park Square West, Leeds</td>
<td align="right">38</td>
<td align="left">0.2973%</td>
</tr>
<tr class="even">
<td align="left">Chapeltown Road, Leeds</td>
<td align="right">35</td>
<td align="left">0.2738%</td>
</tr>
<tr class="odd">
<td align="left">Park Square West, Leeds</td>
<td align="right">33</td>
<td align="left">0.2582%</td>
</tr>
<tr class="even">
<td align="left">WESTGATE junction with PARK SQUARE WEST, LEEDS</td>
<td align="right">33</td>
<td align="left">0.2582%</td>
</tr>
<tr class="odd">
<td align="left">Hollingwood Lane, Bradford</td>
<td align="right">27</td>
<td align="left">0.2112%</td>
</tr>
<tr class="even">
<td align="left">Highgate Road, Bradford</td>
<td align="right">26</td>
<td align="left">0.2034%</td>
</tr>
<tr class="odd">
<td align="left">Cemetery Road, Bradford</td>
<td align="right">25</td>
<td align="left">0.1956%</td>
</tr>
<tr class="even">
<td align="left">Tongue Lane, Leeds</td>
<td align="right">25</td>
<td align="left">0.1956%</td>
</tr>
</tbody>
</table>
</div>
<div class="section level1">
<h1 id="geocoding">Geocoding<a class="anchor" aria-label="anchor" href="#geocoding"></a>
</h1>
<p>We provide a function to geocode the records:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d_sample</span> <span class="op">=</span> <span class="va">d</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span></span>
<span><span class="va">d_sf</span> <span class="op">=</span> <span class="fu">opsnap</span><span class="fu">:::</span><span class="fu">op_geocode</span><span class="op">(</span><span class="va">d_sample</span><span class="op">)</span></span>
<span><span class="fu">mapview</span><span class="fu">::</span><span class="fu">mapview</span><span class="op">(</span><span class="va">d_sf</span><span class="op">)</span></span></code></pre></div>
<p>After geocoding all records we kept only those within the boundary of West Yorkshire, which removed another 3% of records.</p>
</div>
<div class="section level1">
<h1 id="location-of-incidents">Location of incidents<a class="anchor" aria-label="anchor" href="#location-of-incidents"></a>
</h1>
<p>Due to inaccuracy in the geocoding, we only know the locations of the records to within around 500m of each crash (although we can link to specific roads). We’ll present the geographic distribution of crashes using a 500m grid:</p>
<p><img src="reference/figures/README-unnamed-chunk-16-1.png" style="width:100.0%"></p>
<p>The map above represents 8607 incidents in West Yorkshire with an offence that could be geocoded.</p>
<!-- The results show there is one outlier with a very high number of crashes. We can remove this and plot the data again: -->
<!-- You can query the data downloaded with `opsnap` functions, e.g. as follows (results not shown): -->
<!-- Let's make a plot of the data: -->
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing opsnap</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Robin Lovelace <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-5679-6536" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ITSLeeds/opsnap/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/ITSLeeds/opsnap/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Robin Lovelace.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
